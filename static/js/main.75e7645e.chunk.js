(this.webpackJsonpreact_websocket_netronix=this.webpackJsonpreact_websocket_netronix||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),o=n(7),r=n.n(o),i=(n(13),n(2)),d=n(3),h=n(5),m=n(4),l=(n(14),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("table",{width:"100%",cellSpacing:"2px",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{width:"25%",children:"_ID"},Date.now()*Math.random()),Object(a.jsx)("td",{width:"15%",children:"Name"},Date.now()*Math.random()),Object(a.jsx)("td",{width:"10%",children:"Unit"},Date.now()*Math.random()),Object(a.jsx)("td",{width:"20%",children:"Date & Time"},Date.now()*Math.random()),Object(a.jsx)("td",{children:"Measurements"},Date.now()*Math.random())]},Date.now()*Math.random())},Date.now()*Math.random())},Date.now()*Math.random())}),Object(a.jsx)("div",{className:"wrapper",children:this.props.messages.map((function(e){return Object(a.jsx)("table",{width:"100%",cellSpacing:"2px",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{width:"25%",className:e.name.substr(0,3).toLowerCase(),children:e._id},Date.now()*Math.random()),Object(a.jsx)("td",{width:"15%",children:e.name},Date.now()*Math.random()),Object(a.jsx)("td",{width:"10%",children:e.unit},Date.now()*Math.random()),Object(a.jsx)("td",{width:"20%",children:e.timeStamp},Date.now()*Math.random()),Object(a.jsx)("td",{children:e.measurements},Date.now()*Math.random())]},Date.now()*Math.random())},Date.now()*Math.random())},Date.now()*Math.random())}))},Date.now()*Math.random())]})}}]),n}(s.Component)),u=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={messages:[]},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.socket=new WebSocket("wss://jsdemo.envdev.io/ws"),this.socket.onopen=function(){console.log("Connected successfully!")},this.socket.onmessage=function(t){var n=JSON.parse(t.data);n.map((function(e,t){var n="",a="";return e.measurements.forEach((function(e,t){var s=new Date(1e3*e[0]);a="".concat(s.toLocaleString()),n=e[1].length>=2?"[".concat(e[1],"]"):"".concat(e[1])})),e.measurements=n,e.timeStamp=a,e.uniqKey=n.concat(e._id,e.name),e})),n.filter((function(e,t){return n.indexOf(e._id)===t}));for(var a=e.state.messages.slice(),s=0;s<n.length;s++){for(var c=!1,o=0;o<a.length;o++)n[s]._id===a[o]._id&&(n[s].timeStamp&&n[s].measurements&&(a[o].timeStamp=n[s].timeStamp,a[o].measurements=n[s].measurements,a[o].unit=n[s].unit,a[o].uniqKey=n[s].uniqKey),c=!0);c||a.push(n[s])}e.setState({messages:a})},this.socket.onerror=function(t){console.log("Socket encountered error: ".concat(t.message,". Closing socket.")),e.socket.close()},this.socket.onclose=function(e){e.wasClean?console.log("Socket was closed clearly, code=".concat(e.code,".")):console.log("The connection was lost.")}}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(l,{messages:this.state.messages},this.state.messages.uniqKey)})}}]),n}(c.a.Component);r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(u,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.75e7645e.chunk.js.map