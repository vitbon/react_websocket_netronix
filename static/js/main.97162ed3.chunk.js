(this.webpackJsonpreact_websocket_netronix=this.webpackJsonpreact_websocket_netronix||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(1),a=n.n(c),o=n(7),i=n.n(o),r=(n(13),n(2)),d=n(3),l=n(5),m=n(4),h=(n(14),function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"header",children:Object(s.jsx)("table",{width:"100%",cellSpacing:"2px",children:Object(s.jsx)("tbody",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{width:"25%",children:"_ID"}),Object(s.jsx)("td",{width:"15%",children:"Name"}),Object(s.jsx)("td",{width:"10%",children:"Unit"}),Object(s.jsx)("td",{width:"20%",children:"Date & Time"}),Object(s.jsx)("td",{children:"Measurements"})]})})})}),Object(s.jsx)("div",{className:"wrapper",children:this.props.messages.map((function(e){return Object(s.jsx)("table",{width:"100%",cellSpacing:"2px",children:Object(s.jsx)("tbody",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{width:"25%",className:e.name.substr(0,3).toLowerCase(),children:e._id},Date.now()*Math.random()),Object(s.jsx)("td",{width:"15%",children:e.name},Date.now()*Math.random()),Object(s.jsx)("td",{width:"10%",children:e.unit},Date.now()*Math.random()),Object(s.jsx)("td",{width:"20%",className:e.blink,children:e.timeStamp},Date.now()*Math.random()),Object(s.jsx)("td",{className:e.blink,children:e.measurements},Date.now()*Math.random())]},Date.now()*Math.random())},Date.now()*Math.random())},Date.now()*Math.random())}))})]})}}]),n}(c.Component)),u=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={messages:[]},s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.socket=new WebSocket("wss://jsdemo.envdev.io/ws"),this.socket.onopen=function(){console.log("Connected successfully!")},this.socket.onmessage=function(t){var n=JSON.parse(t.data);n.map((function(e,t){var n="",s="";return e.measurements.forEach((function(e,t){var c=new Date(1e3*e[0]);s="".concat(c.toLocaleString()),n="".concat(e[1])})),e.measurements=n,e.timeStamp=s,e.uniqKey=n.concat(e._id,e.name),e})),n.filter((function(e,t){return n.indexOf(e._id)===t}));var s=e.state.messages.slice();s.map((function(e){return e.blink=""}));for(var c=0;c<n.length;c++){for(var a=!1,o=0;o<s.length;o++)n[c]._id===s[o]._id&&(n[c].timeStamp&&n[c].measurements&&(s[o].timeStamp=n[c].timeStamp,s[o].measurements=n[c].measurements,s[o].unit=n[c].unit,s[o].uniqKey=n[c].uniqKey,s[o].blink="blink"),a=!0);a||(n[c].blink="blink",s.push(n[c]))}e.setState({messages:s})},this.socket.onerror=function(t){console.log("Socket encountered error: ".concat(t.message,". Closing socket.")),e.socket.close()},this.socket.onclose=function(e){e.wasClean?console.log("Socket was closed clearly, code=".concat(e.code,".")):console.log("The connection was lost.")}}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return Object(s.jsx)(a.a.Fragment,{children:Object(s.jsx)(h,{messages:this.state.messages},this.state.messages.uniqKey)})}}]),n}(a.a.Component);i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(u,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.97162ed3.chunk.js.map